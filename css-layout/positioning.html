<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Positioning</title>
    <link href="../styles/styles.css" rel="stylesheet" type="text/css">
    <link href="../css-layout/styles/css-layout-styles.css" rel="stylesheet" type="text/css">
    <link href="../index.html">
  </head>
  <body>
    <h2>Introdcuing positioning</h2>
    <p>Positioning allows us to produce interesting results by overriding normal document flow. What if you want to slightly alter the position of some boxes from their default flow position to give a slightly quirky, distressed feel? Positioning is your tool. Or, what if you want to create a UI element that floats over the top of other parts of the page and/or always sits in the same place inside the browser window no matter how much the page is scrolled? Positioning makes such layout work possible as well.</p>
    <p>There are a number of different types of positioning that you can put into effect on HTML elements. To make a specific type of positioning active on an element, we use the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/position"><strong>position</strong></a></kbd> property.</p>
    <p>Keep in mind that this document utilizes the code found on <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/0_basic-flow.html">this GitHub page</a>, a local copy of which can be found <a href="./positioning-sample.html">here</a>.</p>
    <h2>Static positioning</h2>
    <p>Static positioning is the default positioning method that every element gets. It tells the document to "put the element into its normal position in the document flow—nothing to see here."</p>
    <p>To see this (and get your first example set up for future sections), first add a <kbd>class</kbd> of <kbd>positioned</kbd> to the second <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/p">&lt;p&gt;</a></kbd> in the HTML:</p>
<pre><code><strong>HTML</strong>
&lt;p class="positioned"&gt;...&lt;/p&gt;</code></pre>
    <p>Now add the following rule to the bottom of your CSS:</p>
<pre><code><strong>CSS</strong>
.positioned {
  position: static;
  background: yellow;
}</code></pre>
    <p>If you save and refresh, you'll see no difference at all, except for the updated background color of the second paragraph. This is fine—as previously stated, static positioning is the default behavior!</p>
    <p><strong>Note</strong>: You can see the live example at this point <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/1_static-positioning.html">here</a>.</p>
    <h2>Relative positioning</h2>
    <p>Relative positioning is very similar to static positioning, except once the positioned element has taken its place in the normal flow, you can then modify its final position, including by making it overlap other elements on the page. Go ahead and update the <kbd>position</kbd> declaration in your code:</p>
<pre><code><strong>CSS</strong>
position: relative;</code></pre>
    <p>If you save and refresh at this stage, you won't see any changes. So, how do you modify the element's position? You need to use the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/top">top</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/bottom">bottom</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/left">left</a></kbd>, and <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/right">right</a></kbd> properties, which we'll explain in the next section.</p>
    <h3>Introducing top, bottom, left, and right</h3>
    <p><kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/top">top</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/bottom">bottom</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/left">left</a></kbd>, and <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/right">right</a></kbd> are used alongside <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/position">position</a></kbd> to specify exactly where to move the positioned element to. To try this out, add the following declarations to the <kbd>.positioned</kbd> rule in your CSS:</p>
<pre><code><strong>CSS</strong>
top: 30px;
left: 30px;</code></pre>
    <p><strong>Note</strong>: The values of these properties can take any <kbd><a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units">units</a></kbd> you'd reasonably expect: pixels, mm, rems, %, etc.</p>
    <p>Save and refresh the page to see how this affects the layout of the page.</p>
    <p>Ok, so this probably wasn't what you were expecting. Why has it moved to the bottom and to the right if we specified <em>top</em> and <em>left</em>?  Think of it in terms of physics--there's an invisible force that pushes the specified side of the positioned box, moving it in the opposite directon (editor's note: this is a far better explanation of how forces work than what I received in my HS physics class...). So, for example, if you specify <kbd>top: 30px;</kbd>, it's as if a force will push the top of the box, causing it to move downwards by 30px.</p>
    <p><strong>Note</strong>: You can see the live example at this point <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/2_relative-positioning.html">here</a>.</p>
    <h2>Absolute positioning</h2>
    <p>Absolute positioning brings very different results.</p>
    <h3>Setting position: absolute</h3>
    <p>Let's try changing the position declaration in your code as follows:</p>
<pre><code><strong>CSS</strong>
position: absolute;</code></pre>
    <p>If you now save and refresh, you should see that the yellow block of text moves on top of the title text and first paragraph of blue text, obscuring much of these items from view.</p>
    <p>First of all, note that the gap where the positioned element should be in the document flow is no longer there—the first and third elements have closed together like it no longer exists! Well, in a way, this is true. An absolutely positioned element no longer exists in the normal document flow. Instead, it sits on its own layer separate from everything else. This is very useful: it means that we can create isolated UI featured that don't interfere with the layout of other elements on the page. For example, popup information boxes, control menus, rollover panels, UI features that can be dragged and dropped anywhere on the page, and so on.</p>
    <p>Second, notice that the position of the element has changed. This is because <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/top">top</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/bottom">bottom</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/left">left</a></kbd>, and <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/right">right</a></kbd> behave in a different way with absolute positioning. Rather than positioning the element based on its relative position within the normal document flow, they specify the distance the element should be from each of the containing elements' sides. So, in this case, we are saying that the absolutely positioned element should sit 30px from the top of the "containing element" and 30px from the left. (In this case, the "containing element" is the <strong>initial containing block</strong>. See the section below for more information.)</p>
    <p><strong>Note</strong>: You can use <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/top">top</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/bottom">bottom</a></kbd>, <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/left">left</a></kbd>, and <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/right">right</a></kbd> to resize elements if you need to. Try setting <kbd>top: 0; bottom: 0; left: 0; right: 0;</kbd> and <kbd>margin: 0;</kbd> on your positioned elements and see what happens. Put it back again afterwards.</p>
    <p><strong>Note 2</strong>: Yes, margins still affect positioned elements. Margin collapsing, doesn't, however.</p>
    <p><strong>Note 3</strong>: You can see the live example at this point <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/3_absolute-positioning.html">here</a>.</p>
    <h3>Positioning contexts</h3>
    <p>Which element is the "containing element" of an absolutely positioned element? This is very much dependent on the position property of the ancestors of the positioned element (See <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block">identifying the containing block</a>).</p>
    <p>If no ancestor elements have their position property explicitly defined, then by default all ancestor elements will have a static position. The result of this is the absolutely positioned element will be contained in the <strong>initial containing block</strong>. The initial containing block has the dimensions of the viewport and is also the block that contains the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html">&lt;html&gt;</a></kbd> element. In other words, the absolutely positioned element will be displayed outside of the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/html">&lt;html&gt;</a></kbd> element and be positioned relative to the initial viewport.</p>
    <p>The positioned element is nested inside the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/body">&lt;body&gt;</a></kbd> in the HTML source, but in the final layout it's 30px away from the top and left edges of the page. We can change the <strong>positioning context</strong>, that is, which element the absolutely positioned element is positioned relative to. This is done by setting positioning on one of the element's ancestors: to one of the elements it's nested inside of (you can't position it relative to an element it's not nested inside of). To see this, add the following declaration to your <kbd>body</kbd> rule:</p>
<code><pre><strong>CSS</strong>
position: relative;</pre></code>
    <p>You'll see that the positioned element now sits relative to the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/body">&lt;body&gt;</a></kbd> element.</p>
    <p>You can see the live example at this point <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/4_positioning-context.html">here</a>.</p>
    <h3>Introducing z-index</h3>
    <p>All this absolute positioning is good fun, but there's another feature we haven't considered yet. When elements start to overlap, what determines which elements appear over others and which elements appear under others? In the example we've seen so far, we only have one positioned element in the positioning context, and it appears on the top since positioned elements take precedence over non-positioned elements. What about when we have more than one?</p>
    <p>Try adding the following to your CSS to make the first paragraph absolutely positioned too:</p>
<code><pre><strong>CSS</strong>
p:nth-of-type(1) {
  position: absolute;
  background: lime;
  top: 10px;
  right: 30px;
}</pre></code>
    <p>At this point, you'll see the first paragraph colored lime, moved out of the document flow, and positioned a bit above from where it originally was. It's also stacked below the original <kbd>.positioned</kbd> paragraph where the two overlap. This is because the <kbd>.positioned</kbd> paragraph is the second paragraph in the source order, and positioned elements later in the source order take precedence over positioned elements that appear earlier in the source order.</p>
    <p>You can change the stacking order by using the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/z-index">z-index</a></kbd> property. "z-index" is a reference to the z-axis. You may recall from previous points in the course where we discussed web pages using horizontal (x-axis) and vertical (y-axis) coordinates to work out positioning for things like background images and drop shadow effects. For languages that run left to right, (0,0) is at the top left of the page (or element), and the x- and y-axes run across to the right and down the page.</p>
    <p>Web pages also have a z-axis: an imaginary line that runs from the surface of your screen towards your face (or whatever else you have in front of the screen). <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/z-index">z-index</a></kbd> values affect where positioned elements sit on the axis; positive values move them higher up the stack, while negative values move them lower down the stack. By default, all positioned elements have a <kbd>z-index</kbd> of <kbd>auto</kbd>, which is effectively 0.</p>
    <p>(Editor's note: you can also think of the z-index system as similar to the layers system used in graphic design.)</p>
    <p>To change the stacking order, try adding the following declaration to your <kbd>p:nth-of-type(1)</kbd> rule:</p>
<code><pre><strong>CSS</strong>
z-index: 1;</pre></code>
    <p>You should now see the lime paragraph on top.</p>
    <p>Note that <kbd>z-index</kbd> only accepts unitless index values; you can't specify that you want one element to be 23px up the z-axis—it doesn't work like that. Higher values will go above lower values and it's up to you what values you use. Using values of 2 or 3 would give the same affect as values of 300 or 40000.</p>
    <p>You can see the live example at this point <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/5_z-index.html">here</a>.</p>
    <h2>Fixed positioning</h2>
    <p>Let's now look at fixed positioning. This works exactly the same as absolutely positioning, with one key difference: whereas absolute positioning fixes an element relative to its nearest positioned ancestor (the initial containing block if there isn't one), <strong>fixed positioning</strong> <em>usually</em> fixes an element in place relative to the visible portion of the viewport. (An exception to this occurs if one of the element's ancestors is a fixed containing block because its <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform">transform property</a> has a value other than <em>none</em>.) This means that you can create useful UI items that are fixed in place, like persistent navigation menus that are always visible no matter how much the page scrolls.</p>
    <p>Let's put together a simple example. First, comment out the existing <kbd>p:nth-of-type(1)</kbd> and <kbd>.positioned</kbd> rules from your CSS.</p>
    <p>Now, update the <kbd>body</kbd> rule to remove the <kbd>position: relative;</kbd> declaration and add a fixed height, like so:</p>
<pre><code><strong>CSS</strong>
body {
  width: 500px;
  height: 1400px;
  margin: 0 auto;
}</code></pre>
    <p>Now we're going to give the <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/Heading_Elements">h1</a> element <kbd>position: fixed;</kbd> and have it sit at the top of the viewport. Add the following rule to your CSS:</p>
<code><pre><strong>CSS</strong>
h1 {
  position: fixed;
  top: 0;
  width: 500px;
  margin-top: 0;
  background: white;
  padding: 10px;
}</pre></code>
    <p>The <kbd>top: 0;</kbd> is <strong>required</strong> to make it stick to the top of the screen. We give the heading the same width as the content column and then a white background and some padding and margin so the content won't be visible underneath it.</p>
    <p>If you save and refresh, you'll see a fun little effect of the header staying fixed—the content appears to scroll and disappear underneath it. But notice how some of the content is initially clipped under the heading. This is because the positioned heading no longer appears in the document flow, so the rest of the content moves up to the top. We could improve this by moving the paragraphs all down a bit. We can do this by setting some top margin on the first paragraph. Add the following to your CSS:</p>
<pre><code><strong>CSS</strong>
p:nth-of-type(1) {
  margin-top: 60px;
}</code></pre>
    <p>Save and refresh the page to see the new rules take effect.</p>
    <p>You can see the live example at this point <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/6_fixed-positioning.html">here</a>.</p>
    <h2>Sticky positioning</h2>
    <p>There is another value available called <kbd>position: sticky</kbd> which is somewhat newer than the others. This is basically a hybrid between relative and fixed positioning. It allows a positioned element to act like it's relatively positioned until it's scrolled to a certain threshold (e.g., 10px from the top of the viewport), after which it becomes fixed.</p>
    <h3>Basic example</h3>
    <p>Sticky positioning can be used, for example, to cause a navigation bar to scroll with the page until a certain point and then stick to the top of the page.</p>
<pre><code><strong>CSS</strong>
.positioned {
  position: sticky;
  top: 30px;
  left: 30px;
}</code></pre>
    <p>See the live example under the corresponding section on the <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning">MDN page</a>; omitted it from my documents so as not to interfere with the code on either this page or the sample positioning page.</p>
    <h3>Scrolling index</h3>
    <p>An interesting and common use of <kbd>position: sticky</kbd> is to create a scrolling index page where different headings stick to the top of the page as they reach it. The markup for such an example might look like so:</p>
<pre><code><strong>HTML</strong>
&lt;h1&gt;Sticky positioning&lt;/h1&gt;
&lt;dl&gt;
&lt;dt&gt;A&lt;/dt&gt;
  &lt;dd&gt;Apple&lt;/dd&gt;
  &lt;dd&gt;Ant&lt;/dd&gt;
  &lt;dd&gt;Altimeter&lt;/dd&gt;
  &lt;dd&gt;Airplane&lt;/dd&gt;
  &lt;dt&gt;B&lt;/dt&gt;
  &lt;dd&gt;Bird&lt;/dd&gt;
  &lt;dd&gt;Buzzard&lt;/dd&gt;
  &lt;dd&gt;Bee&lt;/dd&gt;
  &lt;dd&gt;Banana&lt;/dd&gt;
  &lt;dd&gt;Beanstalk&lt;/dd&gt;
  &lt;dt&gt;C&lt;/dt&gt;
  &lt;dd&gt;Calculator&lt;/dd&gt;
  &lt;dd&gt;Cane&lt;/dd&gt;
  &lt;dd&gt;Camera&lt;/dd&gt;
  &lt;dd&gt;Camel&lt;/dd&gt;
  &lt;dt&gt;D&lt;/dt&gt;
  &lt;dd&gt;Duck&lt;/dd&gt;
  &lt;dd&gt;Dime&lt;/dd&gt;
  &lt;dd&gt;Dipstick&lt;/dd&gt;
  &lt;dd&gt;Drone&lt;/dd&gt;
  &lt;dt&gt;E&lt;/dt&gt;
  &lt;dd&gt;Egg&lt;/dd&gt;
  &lt;dd&gt;Elephant&lt;/dd&gt;
  &lt;dd&gt;Egret&lt;/dd&gt;
  &lt;/dl&gt;</code></pre>
    <p>The CSS might look as follows. In normal flow the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dt">&lt;dt&gt;</a></kbd> elements will scroll with the content. When we add <kbd>position: sticky</kbd> to the <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element/dt">&lt;dt&gt;</a></kbd> element, along with a <kbd><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/top">top</a></kbd> value of 0, supporting browsers will stick the headings to the top of the viewport as they reach that position. Each subsequent header will then replace the previous one as it scrolls up to that position.</p>
<pre><code><strong>CSS</strong>
dt {
  background-color: black;
  color: white;
  padding: 10px;
  position: sticky;
  top: 0;
  left: 0;
  margin: 1em 0;
}</code></pre>
    <p>Sticky elements are "sticky" relative to the nearest ancestor with a "scrolling mechanism," which is determined by its ancestors' <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/position">position</a> property.</p>
    <p>You can see this example live on <a href="https://mdn.github.io/learning-area/css/css-layout/positioning/7_sticky-positioning.html">this page</a>. Alternatively, you can look under the corresponding section on the <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/CSS_layout/Positioning">MDN page</a>; omitted it from my documents so as not to interfere with the code on either this page or the sample positioning page.</p>
  </body>
</html>
